function workway(a){"use strict";
/*! (c) 2018 Andrea Giammarchi (ISC) */return new Promise(function(o,e){function i(){return++t+Math.random()}var t=0,u=i(),f={},h=new Worker(a);h.addEventListener("message",function(e){if(e.data.channel===u){e.stopImmediatePropagation();var t=e.data.namespace;if(t){var s=function(e){var a,n,t=new Promise(function(e,t){a=e,n=t});return t.resolve=a,t.reject=n,f[e.id=i()]=t,h.postMessage({channel:u,message:e}),t},c=[].slice;!function n(r){Object.keys(r).forEach(function(e){var t,a=r[e];switch(a.type){case"class":r[e]=function(e){var t=e.path,a=e.methods,n=e.statics,r=new WeakMap;function o(){r.set(this,i())}return a.forEach(function(e){o.prototype[e]=function(){return s({args:c.call(arguments),path:t,method:e,object:{id:r.get(this),value:this}})}}),n.methods.forEach(function(e){o[e]=function(){return s({args:c.call(arguments),path:t,method:e})}}),n.values.forEach(function(e){o[e[0]]=e[1]}),o}(a);break;case"function":r[e]=(t=a.path,function(){return s({args:c.call(arguments),path:t})});break;case"object":n(r[e]=a.value);break;default:r[e]=a.value}})}(t),o({worker:h,namespace:t})}else{var a=e.data.message,n=a.id,r=f[n];delete f[n],a.hasOwnProperty("error")?r.reject(new Error(a.error)):r.resolve(a.result)}}}),h.postMessage({channel:u})})}