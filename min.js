function workway(a){"use strict";
/*! (c) 2018 Andrea Giammarchi (ISC) */return new Promise(function(i,e){var t=0,u=l(),f={},h=new Worker(a);function l(){return++t+Math.random()}h.addEventListener("message",function(e){if(e.data.channel===u){e.stopImmediatePropagation();var t=e.data.namespace;if(t){var s=function(e){var a,n,t=new Promise(function(e,t){a=e,n=t});return t.resolve=a,t.reject=n,f[e.id=l()]=t,h.postMessage({channel:u,message:e}),t},c=[].slice,r=function(n){Object.keys(n).forEach(function(e){var t,a=n[e];switch(a.type){case"class":n[e]=function(e){var t=e.path,a=e.methods,n=e.statics,r=new WeakMap;function o(){r.set(this,l())}return a.forEach(function(e){o.prototype[e]=function(){return s({args:c.call(arguments),path:t,method:e,object:{id:r.get(this),value:this}})}}),n.methods.forEach(function(e){o[e]=function(){return s({args:c.call(arguments),path:t,method:e})}}),n.values.forEach(function(e){o[e[0]]=e[1]}),o}(a);break;case"function":n[e]=(t=a.path,function(){return s({args:c.call(arguments),path:t})});break;case"object":r(n[e]=a.value);break;default:n[e]=a.value}})};r(t),i({worker:h,namespace:t})}else{var a=e.data.message,n=a.id,o=f[n];delete f[n],a.hasOwnProperty("error")?o.reject(new Error(a.error)):o.resolve(a.result)}}}),h.postMessage({channel:u})})}